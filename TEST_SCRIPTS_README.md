# ๐งช ุฏููู ูููุงุช ุงูุงุฎุชุจุงุฑ - BuraqForms Test Scripts

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูููุงุช ุงุฎุชุจุงุฑ ุดุงููุฉ ููุญุต ุงููุธุงู ููุงุนุฏุฉ ุงูุจูุงูุงุช:

### 1๏ธโฃ test_database_connection.php - ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุดุงูู

**ุงููููุน:** `/test_database_connection.php`

**ุงููุธููุฉ:** ุงุฎุชุจุงุฑ ุดุงูู ููุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุถูู:
- โ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุญุต ุฌููุน ุงูุฌุฏุงูู ุงููุทููุจุฉ (8 ุฌุฏุงูู)
- โ ูุญุต ุงูุฅุฏุงุฑุงุช ูุงูุจูุงูุงุช
- โ ูุญุต ุฅุนุฏุงุฏุงุช ุงููุธุงู
- โ ุงุฎุชุจุงุฑ ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ ูุงูุชุฑููุฒ utf8mb4

**ุงูุฏูุงู ุงููุชุงุญุฉ:**
```php
testDatabaseConnection(): bool  // ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
testTables(): bool              // ูุญุต ุงูุฌุฏุงูู
testDepartments(): bool         // ูุญุต ุงูุฅุฏุงุฑุงุช
testSystemSettings(): bool      // ูุญุต ุงูุฅุนุฏุงุฏุงุช
testCharset(): bool             // ุงุฎุชุจุงุฑ ุงูุชุฑููุฒ ูุงูุนุฑุจูุฉ
```

**ุงูุงุณุชุฎุฏุงู:**
```bash
php test_database_connection.php
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช BuraqForms      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: ูุฌุญ

๐ ูุญุต ุงูุฌุฏุงูู:
--------------------------------------------------
โ ุฌุฏูู 'admins': ููุฌูุฏ
โ ุฌุฏูู 'departments': ููุฌูุฏ
โ ุฌุฏูู 'forms': ููุฌูุฏ
...

๐ ุงูุฅุฏุงุฑุงุช:
--------------------------------------------------
ุนุฏุฏ ุงูุฅุฏุงุฑุงุช: 5
  - ุงูุฅุฏุงุฑุฉ ุงูููุฏุณูุฉ (ID: 1)
  - ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ (ID: 2)
...

โ๏ธ ุงูุฅุนุฏุงุฏุงุช:
--------------------------------------------------
ุนุฏุฏ ุงูุฅุนุฏุงุฏุงุช: 3
  - site_name
  - default_language
  - timezone

๐ค ุงูุชุฑููุฒ:
--------------------------------------------------
character_set_connection: utf8mb4
โ ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ: ูุนูู

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ               ููุฎุต ุงูุงุฎุชุจุงุฑุงุช                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ ุงูุงุชุตุงู                        โ ูุฌุญ
โ ุงูุฌุฏุงูู                        โ ูุฌุญ
โ ุงูุฅุฏุงุฑุงุช                       โ ูุฌุญ
โ ุงูุฅุนุฏุงุฏุงุช                      โ ูุฌุญ
โ ุงูุชุฑููุฒ                        โ ูุฌุญ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ: 5 ูู 5 ุงุฎุชุจุงุฑุงุช ูุฌุญุช        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุช! ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู.
```

**ุฑููุฒ ุงูุฎุฑูุฌ:**
- `0` - ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุช
- `1` - ุจุนุถ ุงูุงุฎุชุจุงุฑุงุช ูุดูุช

---

### 2๏ธโฃ test_system_health.php - ูุญุต ุตุญุฉ ุงููุธุงู

**ุงููููุน:** `/test_system_health.php`

**ุงููุธููุฉ:** ูุญุต ุณุฑูุน ูุตุญุฉ ุงููุธุงู ุงูุนุงูุฉ:
- โ ุฅุตุฏุงุฑ PHP
- โ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุฌูุฏ ุงููุฌูุฏุงุช ุงููุทููุจุฉ
- โ ุตูุงุญูุงุช ุงููุชุงุจุฉ ุนูู storage

**ุงูุงุณุชุฎุฏุงู:**
```bash
php test_system_health.php
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ     ูุญุต ุตุญุฉ ูุธุงู BuraqForms              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ PHP Version: 8.1.0
โ Database: ูุชุตู

๐ ุงููููุงุช ูุงููุฌูุฏุงุช:
โ public: ููุฌูุฏ
โ config: ููุฌูุฏ
โ src: ููุฌูุฏ
โ storage: ููุฌูุฏ

๐ ุงูุตูุงุญูุงุช:
โ storage/: ูุงุจู ูููุชุงุจุฉ

โจ ูุญุต ุงููุธุงู ุงูุชูู!
```

---

## ๐ ุงูุฌุฏุงูู ุงููุทููุจุฉ

ููุญุต `test_database_connection.php` ุงูุฌุฏุงูู ุงูุชุงููุฉ:

1. **admins** - ุฌุฏูู ุงููุณุคูููู
2. **departments** - ุฌุฏูู ุงูุฅุฏุงุฑุงุช
3. **forms** - ุฌุฏูู ุงูููุงุฐุฌ
4. **form_fields** - ุฌุฏูู ุญููู ุงูููุงุฐุฌ
5. **form_submissions** - ุฌุฏูู ุงูุทูุจุงุช ุงูููุฏูุฉ
6. **submission_answers** - ุฌุฏูู ุฅุฌุงุจุงุช ุงูุทูุจุงุช
7. **system_settings** - ุฌุฏูู ุฅุนุฏุงุฏุงุช ุงููุธุงู
8. **file_download_logs** - ุฌุฏูู ุณุฌูุงุช ุงูุชูุฒูู

---

## ๐ง ุงููุชุทูุจุงุช ุงููููุฉ

### ุงูุจูุฆุฉ ุงููุทููุจุฉ:
- โ PHP 8.0 ุฃู ุฃุญุฏุซ (ูุณุชุฎุฏู `match` expression)
- โ PDO MySQL Extension
- โ ูุงุนุฏุฉ ุจูุงูุงุช MySQL/MariaDB ูุน ุฏุนู utf8mb4
- โ ููู `.env` ูุญุฏุซ ุจุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุชุจุนูุงุช:
- `config/database.php` - ููุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- `vendor/autoload.php` - (ุงุฎุชูุงุฑู) ููู Services

---

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### 1. ุจุนุฏ ุงูุชุซุจูุช ุงูุฃููู
```bash
# ุงุฎุชุจุงุฑ ุดุงูู ููุชุฃูุฏ ูู ุตุญุฉ ุงูุฅุนุฏุงุฏ
php test_database_connection.php
```

### 2. ูุญุต ุณุฑูุน ูุจู ุงููุดุฑ
```bash
# ูุญุต ุณุฑูุน ูููุธุงู
php test_system_health.php
```

### 3. ุงูุชุดุฎูุต ุนูุฏ ูุฌูุฏ ูุดุงูู
```bash
# ูุนุฑุถ ุชูุงุตูู ุฏูููุฉ ุนู ุญุงูุฉ ุงููุธุงู
php test_database_connection.php
```

### 4. ูู CI/CD Pipeline
```bash
# ูููู ุงุณุชุฎุฏุงูู ูู ุณูุฑูุจุชุงุช ุงูู CI
php test_database_connection.php && echo "Tests passed" || exit 1
```

---

## โ๏ธ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### โ ุฎุทุฃ: "ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: ูุดู"
**ุงูุญู:**
1. ุชุญูู ูู ููู `.env`:
   ```bash
   cat .env
   ```
2. ุชุฃูุฏ ูู ุตุญุฉ ุจูุงูุงุช ุงูุงุชุตุงู:
   - DB_HOST
   - DB_USER
   - DB_PASS
   - DB_NAME

### โ ุฎุทุฃ: "ุฌุฏูู ุบูุฑ ููุฌูุฏ"
**ุงูุญู:**
```bash
# ูู ุจุชุดุบูู migrations
php database/run_migrations.php
```

### โ ุฎุทุฃ: "ูุง ุชูุฌุฏ ุฅุฏุงุฑุงุช"
**ุงูุญู:**
```bash
# ูู ุจุฅุฏุฎุงู ุจูุงูุงุช ุฃูููุฉ
php database/seed_departments.php
```

### โ ุฎุทุฃ: "ูุดููุฉ ูู ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ"
**ุงูุญู:**
1. ุชุญูู ูู ุงูุชุฑููุฒ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
   ```sql
   ALTER DATABASE buraq_forms CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

---

## ๐ ูุฒุงูุง ูููุงุช ุงูุงุฎุชุจุงุฑ

### โจ ุงููููุฒุงุช:
- ๐จ **ูุงุฌูุฉ ุฌูููุฉ:** ุชูุงุฑูุฑ ููุธูุฉ ูุณููุฉ ุงููุฑุงุกุฉ
- ๐ **ุฏุนู ูุงูู ููุนุฑุจูุฉ:** ุฌููุน ุงูุฑุณุงุฆู ุจุงูุนุฑุจูุฉ
- ๐ **ุชูุงุฑูุฑ ููุตูุฉ:** ุนุฑุถ ุชูุตููู ููู ุงุฎุชุจุงุฑ
- โ **exit codes ุตุญูุญุฉ:** ููุงุณุชุฎุฏุงู ูู ุงูู automation
- ๐ **ุชุดุฎูุต ุฏููู:** ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ

### ๐ฏ ุงูุงุฎุชุจุงุฑุงุช ุงูุดุงููุฉ:
1. โ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
2. โ ูุญุต ุฌููุน ุงูุฌุฏุงูู
3. โ ุงูุชุญูู ูู ุงูุจูุงูุงุช
4. โ ุงุฎุชุจุงุฑ ุงูุชุฑููุฒ
5. โ ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ
6. โ ุตูุงุญูุงุช ุงููููุงุช

---

## ๐ ุงูุงุณุชุฎุฏุงู ุงููุชูุฏู

### ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ุจุดูู ุฏูุฑู (Cron)
```bash
# ุฅุถุงูุฉ ุฅูู crontab
0 */6 * * * /usr/bin/php /path/to/project/test_system_health.php >> /var/log/buraqforms_health.log 2>&1
```

### ุงุณุชุฎุฏุงู ูู Docker
```dockerfile
# ูู Dockerfile
RUN php test_database_connection.php

# ุฃู ูู docker-compose.yml healthcheck
healthcheck:
  test: ["CMD", "php", "/var/www/html/test_system_health.php"]
  interval: 30s
  timeout: 10s
  retries: 3
```

---

## ๐ ููุงุญุธุงุช

- ุงููููุงุช ุชุณุชุฎุฏู `declare(strict_types=1)` ูุถูุงู type safety
- ุฌููุน ุงูุฏูุงู ููุซูุฉ ูููุง return types ูุงุถุญุฉ
- ุงูููุฏ ูุชูุงูู ูุน PHP 8.0+
- ุงูุงุฎุชุจุงุฑุงุช ูุง ุชุนุฏู ุงูุจูุงูุงุช (read-only)
- ูููู ุชุดุบูู ุงููููุงุช ุจุฃูุงู ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ

---

## ๐ ูููุงุช ุฐุงุช ุตูุฉ

- `config/database.php` - ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `database/run_migrations.php` - ุชุดุบูู migrations
- `.env.example` - ูุซุงู ุนูู ุฅุนุฏุงุฏุงุช ุงูุจูุฆุฉ

---

## โ ุงูุฎูุงุตุฉ

ุชู ุฅูุดุงุก ูููุงุช ุงุฎุชุจุงุฑ ุงุญุชุฑุงููุฉ ูุดุงููุฉ ุชููุฑ:
- โ ุงุฎุชุจุงุฑ ูุงูู ููุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุญุต ุตุญุฉ ุงููุธุงู
- โ ุชูุงุฑูุฑ ูุงุถุญุฉ ูููุตูุฉ
- โ ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ
- โ ุณูููุฉ ุงูุงุณุชุฎุฏุงู ูุงูุตูุงูุฉ

**ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ุงูููุฑู!** ๐
